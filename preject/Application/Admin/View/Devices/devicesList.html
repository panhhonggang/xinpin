<include file="Public/header" />
<div class="content">
    <include file="Public/nav" />
    <div class="row-fluid fl" id="main">
        <div class="tableBox">
            <div class="titleBar">设备管理/<span>设备列表</span></div>
            <form class="form-search fr" action="" method="">
                <input type="text" class="input-medium" name="name" placeholder="请输入用户昵称" / >  
                <button type="submit" class="btn">查找</button>
            </form>
            <table class="table table-bordered table-hover text-center" >
                <thead class="h4 ">
                    <tr class="danger">
                        <td>ID</td>
                        <td>设备编号</td>
                        <td>机组名称</td>
                        <td>经销商名称</td>
                        <td>设备类型(滤芯)</td>
                        <td>最近更新时间</td>
                        <td>设备状态</td>
                        <!-- <td>操作</td> -->
                        <!-- <td>使用记录</td> -->
                    </tr>
                </thead>
                <tbody>
                    <notempty name="deviceInfo">
                    <foreach name="deviceInfo" item="data" key="key">
                        <tr>
                            <td>{{$key+1}}</td>
                            <td><a class="btn-link detail" href="deviceDetail?code={{$data.device_code}}">{{$data.device_code}}</a></td>
                            <td>{{$data.cname}}</td>
                            <td>{{$data.name}}</td>
                            <td>{{$data.typename}}</td>
                            <td>{{$data.updatetime|date='Y-m-d H:i:s', ###}}</td>
                            <td>
                                <switch name="data.device_status">
                                    <case value="0">正常</case>
                                    <case value="1">冲洗</case>
                                    <case value="2">缺水</case>
                                    <case value="3">漏水</case>
                                    <case value="4">检修</case>
                                    <case value="5">欠费</case>
                                    <case value="6">关机</case>
                                    <default />
                                </switch>
                            </td>
                            <!-- <td><a class="btn-link">开机</a></td> -->
                            <!-- <td><a class="btn-link" href="chargelist?code={{$data.device_code}}" class="chargeBtn">查看</a></td> -->
                        </tr>
                    </foreach>
                    <else />
                    <tr>
                        <td colspan="12">查无数据</td>
                    </tr>
                    </notempty>
                </tbody>
            </table>
            <!-- 上下页，请加样式 -->
            <div class="pagination">
                <ul>
                    {{$page}}
                </ul>
            </div>
        </div>
        <include file="Public/footer" />
    </div>
</div>
<!-- <script type="text/javascript">
    // 产品详情
    $('.detail').click(function (){
        var code = $(this).html();
        $.ajax({
            url:"deviceDetail",
            type:"post",
            dataType:'json',
            data:{code},
            success:function(data){  
            console.log(data);              
                if('给你老王玩了'){
                    layui.use('layer', function(){
                        var layer = layui.layer;
                        layer.open({
                            type: 1, 
                            title: ['设备详情', 'font-size:18px;'],
                            area: ['1200px', '680px'],
                            content: $(".showdetail")
                        }); 
                    });
                    var tableHtml='';
                    var deviceInfo='';
                    $(".filterInfoTable tbody").html("<tr><td>滤芯项</td><td>剩余流量信息</td></tr>");
                    $(".deviceInfoTable").html("");
                    for(var i=0;i<8;i++){
                        tableHtml+='<tr><td>滤芯'+(i + 1)+'</td><td style=\"\"><p style=\"width:350px;display:inline-block\"><span style=\"width:;height:10px;background:#ccc;\"></span></p><span>'+ data['redayfilter'+(i + 1)] +'<span></td></tr>';
                    }
                    $(".filterInfoTable tbody").append(tableHtml);

                    deviceInfo='<tbody><tr><td>设备编号</td><td>'+data.deviceid+'</td></tr><tr><td>安装时间</td><td>'+data.addtime+'</td></tr><tr><td>安装地址</td><td>'+data.loaction+'</td></tr><tr><td>设备状态</td><td>'+data.devicestause+'</td></tr><tr><td>纯水值</td><td>'+data.rawtds+'</td></tr><tr><td>原水值</td><td>'+data.puretds+'</td></tr><tr><td>剩余流量</td><td>'+data.flow+'</td></tr><tr><td>剩余天数</td><td>'+data.reday+'</td></tr><tr><td>租赁模式</td><td>'+data.leasingmode+'</td></tr><tr><td>激活状态</td><td>'+data.alivestause+'</td></tr><tr><td>滤芯模式</td><td>'+data.filtermode+'</td></tr><tr><td>温度</td><td>'+data.temperature+'</td></tr><tr><td>更新时间</td><td>'+data.updatetime+'</td></tr></tbody>';
                    $(".deviceInfoTable").append(deviceInfo);
                } else {
                    layui.use('layer', function(){
                        var layer = layui.layer;
                        layer.msg('参数错误', {icon: 5});
                    });
                } 
            }
        })
    })
</script>
<div class="showdetail container">
    <div class="fl filterInfo">
        <h3>滤芯信息</h3>
        <table class="table filterInfoTable"> 
            <tbody>
                <th>
                    <td>滤芯剩余流量</td>
                    <td></td>
                </th>
            </tbody>
        </table>
        <div>
            <form>
                <div class=" btn-groups btnList">
                    <h4>设备操作</h4>
                    <button class="btns reset btn-primary" type="submit" style="margin: 0 0 10px 90px; ">开机</button>
                    <button class="subbtn btns btn-primary" type="submit" style="margin: 0 0 10px 90px; ">关机</button>
                </div>
            </form>
        </div>
    </div>
    <div class="fl deviceInfo">
        <h3>设备信息</h3>
        <div class="tableList">
            <table class="table deviceInfoTable">
                
            </table>
        </div>
    </div>
</div> -->